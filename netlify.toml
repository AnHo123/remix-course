[build]
command = "npx prisma generate && npm run build"
publish = "build/client"

[dev]
command = "npm run dev"
framework = "vite"

# Set immutable caching for static files, because they have fingerprinted filenames

[[headers]]
for = "/build/*"
[headers.values]
Cache-Control = "public, max-age=31560000"

[[headers]]
for = "*.html"
[headers.values]
Cache-Control = "no-cache"


[[headers]]
for = "*.png"
[headers.values]
Cache-Control = "max-age=31536000"

[[headers]]
for = "*.css"
[headers.values]
Cache-Control = "max-age=31536000"

[[redirects]]
from = "/*"
to = "/index.html"
status = 200
force = false

[[redirects]]
from = "*.js"
to = "/netlify/functions/server"
status = 200

